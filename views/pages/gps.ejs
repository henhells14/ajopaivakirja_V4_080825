<main class="hero">
  <div class="car-section">
    <img src="/Pages/Resources/main-kuvat/Auto-RED.png" alt="Piirretty auto" class="car" id="carImage" />
    
    <!-- Tarkista onko käyttäjä kirjautunut -->
    <% if (user) { %>
      <!-- Kirjautunut käyttäjä - näytä GPS-toiminnot -->
      <div class="user-welcome">
        <p>Tervetuloa, <strong><%= user.nimi %></strong>!</p>
      </div>
      
      <!-- GPS-seurannan tiedot -->
      <div class="trip-info" id="tripInfo">
        <div class="distance-big" id="distanceDisplay">0.00 km</div>
        
        <div class="info-row">
          <span class="info-label">Matka-aika:</span>
          <span class="info-value" id="timeDisplay">00:00:00</span>
        </div>
        
        <div class="info-row">
          <span class="info-label">Nopeus:</span>
          <span class="info-value" id="speedDisplay">0 km/h</span>
        </div>
        
        <div class="info-row">
          <span class="info-label">Tila:</span>
          <span class="info-value" id="statusDisplay">Valmis aloittamaan</span>
        </div>
      </div>
      
      <!-- Virheviesti -->
      <div class="error-message" id="errorMessage"></div>
      
      <!-- Onnistumisviesti -->
      <div class="success-message" id="successMessage"></div>
      
      <button class="startTripBtn" id="startTripBtn" onclick="toggleTracking()">Aloita matka</button>
      
    <% } else { %>
      <!-- Ei kirjautunut - näytä kirjautumiskehotus -->
      <div class="auth-required">
        <h2>Kirjautuminen vaaditaan</h2>
        <p>GPS-toimintojen käyttö vaatii kirjautumisen.</p>
        <div class="auth-buttons">
          <a href="/kirjaudu-sisaan" class="btn btn-primary">Kirjaudu sisään</a>
          <a href="/rekisterointi" class="btn btn-secondary">Rekisteröidy</a>
        </div>
      </div>
    <% } %>
  </div>
</main>

<!-- GPS-sivun omat CSS:t -->
<link rel="stylesheet" href="/Pages/Page2/local-css/tokasivu.css">

<!-- Lataa JavaScript vain kirjautuneille käyttäjille -->
<% if (user) { %>
  <script>
    // Välitä käyttäjätiedot JavaScriptille
    window.currentUser = {
      id: '<%= user.id %>',
      name: '<%= user.nimi %>'
    };
  </script>
  <script src="/Pages/Page2/local-js/tokasivu.js" defer></script>
<% } %>

<style>
/* Lisää nämä tyylit CSS-tiedostoosi tai tähän */
.user-welcome {
  text-align: center;
  margin-bottom: 20px;
  color: #333;
}

.auth-required {
  text-align: center;
  padding: 40px 20px;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 10px;
  margin: 20px 0;
}

.auth-required h2 {
  color: #333;
  margin-bottom: 15px;
}

.auth-required p {
  color: #666;
  margin-bottom: 25px;
  font-size: 16px;
}

.auth-buttons {
  display: flex;
  gap: 15px;
  justify-content: center;
  flex-wrap: wrap;
}

.btn {
  padding: 12px 24px;
  text-decoration: none;
  border-radius: 6px;
  font-weight: 500;
  transition: all 0.3s ease;
}

.btn-primary {
  background-color: #007bff;
  color: white;
}

.btn-primary:hover {
  background-color: #0056b3;
}

.btn-secondary {
  background-color: #6c757d;
  color: white;
}

.btn-secondary:hover {
  background-color: #545b62;
}
</style>